webpackJsonp([37],{"7E+U":function(t,e,s){"use strict";var o=s("F9vk"),r=s("y8ae"),a=s("V8bM"),n=s("IgDG"),i=s("FhoZ"),u=s.n(i);e.a={data:function(){var t=this;return{loading:!1,formCustom:{lastPasswd:"",passwd:"",passwdCheck:""},ruleCustom:{lastPasswd:[{required:!0,message:"请填写原密码",trigger:"blur"}],passwd:[{required:!0,message:"请填写新密码",trigger:"blur"},{validator:function(e,s,r){""===s?r(new Error("请输入密码")):s.length<o.a.MIN_PWD?r(new Error("密码长度不能少于"+o.a.MIN_PWD+"位")):(""!==t.formCustom.passwdCheck&&t.$refs.formCustom.validateField("passwdCheck"),r())},trigger:"blur"}],passwdCheck:[{required:!0,message:"请验证密码",trigger:"blur"},{validator:function(e,s,o){""===s?o(new Error("请再次输入密码")):s!==t.formCustom.passwd?o(new Error("两次输入密码不一致!")):o()},trigger:"blur"}]}}},asyncData:function(t){return{user:t.user}},middleware:"userRequired",methods:{handleKeyUp:function(t){if(13===t.keyCode)return this.handleSubmit("formCustom")},handleSubmit:function(t){var e=this;this.$refs[t].validate(function(t){if(t){if(e.loading)return;e.loading=!0,a.a.changePwd({body:{password:Object(n.a)(e.formCustom.lastPasswd),newPwd:Object(n.a)(e.formCustom.passwd)}}).then(function(t){e.loading=!1,t.errNo===r.a.LOGIN_TIMEOUT?(e.$Message.error({duration:u.a.messageDuration,closable:!0,content:"登录超时"}),setTimeout(function(){window.location.href="/signin"},3e3)):t.errNo===r.a.SUCCESS?(e.$Message.success({duration:u.a.messageDuration,closable:!0,content:"提交成功!"}),setTimeout(function(){window.location.href="/"},3e3)):e.$Message.error({duration:u.a.messageDuration,closable:!0,content:t.msg})}).catch(function(t){e.loading=!1,e.$Message.error({duration:u.a.messageDuration,closable:!0,content:t.message})})}})}},layout:"nosidebar",head:function(){return{title:"修改密码"}}}},B0RK:function(t,e,s){"use strict";var o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"golang-forget-container"},[s("h1",[t._v("账号安全中心")]),s("p",{staticClass:"golang-forget-title"},[t._v("修改密码")]),s("div",{staticClass:"golang-forget-form",attrs:{id:"reset"}},[s("i-form",{ref:"formCustom",staticClass:"signup-form",attrs:{model:t.formCustom,rules:t.ruleCustom,"label-width":80}},[s("Form-item",{attrs:{label:"旧密码",prop:"lastPasswd"}},[s("i-input",{staticClass:"signup-input",attrs:{type:"password"},model:{value:t.formCustom.lastPasswd,callback:function(e){t.formCustom.lastPasswd=e},expression:"formCustom.lastPasswd"}})],1),s("Form-item",{attrs:{label:"新密码",prop:"passwd"}},[s("i-input",{staticClass:"signup-input",attrs:{type:"password"},model:{value:t.formCustom.passwd,callback:function(e){t.formCustom.passwd=e},expression:"formCustom.passwd"}})],1),s("Form-item",{attrs:{label:"确认密码",prop:"passwdCheck"}},[s("i-input",{staticClass:"signup-input",attrs:{type:"password"},nativeOn:{keyup:function(e){t.handleKeyUp(e)}},model:{value:t.formCustom.passwdCheck,callback:function(e){t.formCustom.passwdCheck=e},expression:"formCustom.passwdCheck"}})],1),s("Form-item",[s("i-button",{staticStyle:{"margin-right":"30px"},attrs:{type:"primary"},on:{click:function(e){t.handleSubmit("formCustom")}}},[t._v("提  交")]),s("a",{attrs:{href:"/"}},[s("i-button",{attrs:{type:"ghost"}},[t._v("取  消")])],1)],1)],1)],1)])])},r=[],a={render:o,staticRenderFns:r};e.a=a},F9vk:function(t,e,s){"use strict";e.a={MIN_PWD:6}},IgDG:function(t,e,s){"use strict";s.d(e,"a",function(){return o}),s.d(e,"b",function(){return r});var o=function(t){return t.replace(/(^\s*)|(\s*$)/g,"")},r=function(t,e){var s=t.split("."),r=e,a=s.length-1,n=s[a];s.map(function(t,e){e!==a&&(r=r[t])}),r[n]=o(r[n])}},QVXw:function(t,e,s){"use strict";function o(t){s("qs2Z")}Object.defineProperty(e,"__esModule",{value:!0});var r=s("7E+U"),a=s("B0RK"),n=s("VU/8"),i=o,u=n(r.a,a.a,!1,i,null,null);e.default=u.exports},Rwf6:function(t,e,s){e=t.exports=s("FZ+f")(!1),e.push([t.i,"body{background-color:#e1e1e1}.golang-forget-container{width:1200px;margin:0 auto;height:560px;margin-top:20px;background-color:#fff;padding:20px}.golang-forget-container h1{font-size:24px}.golang-forget-title{height:30px;line-height:30px;background-color:#80bd01;color:#fff;font-size:14px;margin-top:15px;padding-left:10px}.golang-forget-form{width:400px;margin:0 auto;margin-top:60px}.forget-button{width:400px}.reset-pwd-button{margin-left:80px;width:300px}.forget-success-icon{text-align:center}.forget-success-icon img{widows:80px;height:80px}.forget-success-info{text-align:center;font-size:16px;font-weight:700;margin-top:30px}.reset-container{padding-top:20px}.reset-form{width:380px;margin:0 auto}.signup-input{width:300px}.forget-resend{color:#007fff;margin-left:10px;cursor:pointer}.forget-resend:hover{color:#007fff;text-decoration:none;text-decoration:underline}.not-resend{color:#9e9e9e;margin-left:10px;cursor:not-allowed}",""])},qs2Z:function(t,e,s){var o=s("Rwf6");"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);s("rjj0")("6594e2e2",o,!0)},y8ae:function(t,e,s){"use strict";e.a={SUCCESS:0,ERROR:1,LOGIN_TIMEOUT:1001,IN_ACTIVE:1002}}});
//# sourceMappingURL=pwdModify.3ed1a545386de04cc9eb.js.map