webpackJsonp([43],{"1r+l":function(t,e,a){var n=a("w6W4");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);a("rjj0")("bbfd2676",n,!0)},bkn3:function(t,e,a){"use strict";function n(t){a("1r+l")}Object.defineProperty(e,"__esModule",{value:!0});var i=a("louO"),s=a("xwRW"),o=a("VU/8"),r=n,c=o(i.a,s.a,!1,r,null,null);e.default=c.exports},louO:function(t,e,a){"use strict";var n=a("V8bM"),i=a("y8ae"),s=!1;e.a={data:function(){return{editIndex:"",id:"",formDynamic:{items:[]},editDynamic:{},editStatus:"common"}},asyncData:function(t){return n.a.getCategories({client:t.req}).then(function(t){return console.log(t),{list:t.data.categories||[]}}).catch(function(t){self.$Message.error(t.msg)})},methods:{handleSubmit:function(t){var e=this;this.$refs[t].validate(function(t){t&&!s&&(s=!0,n.a.categoryCreate({body:{parentId:0,name:e.formDynamic.items[0].value,status:1}}).then(function(t){console.log(t),s=!1,t.errNo===i.a.SUCCESS?(e.$Message.success("提交成功!"),e.list.push(t.data.category)):e.$Message.error(t.msg),e.formDynamic.items=[],e.editStatus="common"}).catch(function(t){s=!1,e.$Message.error(t.msg)}))})},handleAdd:function(){this.editStatus="create",this.formDynamic.items[0]={value:""}},handleRemove:function(t){this.editStatus="common",this.formDynamic.items=[]},handleEditSubmit:function(t){var e=this,a=this;this.$refs[t][0].validate(function(t){t&&!s&&(s=!0,n.a.categoryUpdate({body:{parentId:0,name:a.editDynamic.value,status:a.list[a.editIndex].status,id:a.list[a.editIndex].id}}).then(function(t){s=!1,a.$Message.success("提交成功!"),a.editStatus="common",a.list[a.editIndex]=t.data.category,e.editStatus="common",e.editDynamic={},e.editIndex=""}).catch(function(t){s=!1,a.$Message.error(t.msg)}))})},handleEditCancel:function(){this.editStatus="common",this.editDynamic={},this.editIndex=""},edit:function(t,e,a){this.editStatus="edit",this.editDynamic={value:a},this.editIndex=e},change:function(t,e){var a=this;this.$Modal.confirm({title:"提醒",content:"是否"+(2===a.list[e].status?"启用":"禁用")+"该标签?",loading:!0,onOk:function(){var o=1===a.list[e].status?2:1;s||(s=!0,n.a.getAdminCategories({body:{id:t,status:o}}).then(function(t){s=!1,t.errNo===i.a.SUCCESS?a.list[e].status=t.data.status:a.$Message.error(t.msg),a.$Modal.remove()}).catch(function(t){s=!1,a.$Message.error(t.msg)}))}})}},layout:"admin",mounted:function(){console.log(this.list)}}},w6W4:function(t,e,a){e=t.exports=a("FZ+f")(!1),e.push([t.i,".admin-tag-container,.admin-tag-form{margin-top:20px}.admin-tag-item{margin-top:10px}.admin-status-tag{color:#20a0ff;margin-left:5px;cursor:pointer}.admin-status-tag:hover{color:#000}",""])},xwRW:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Row",{staticClass:"admin-tag-container"},[a("h1",[t._v("分类管理")]),a("Col",{staticClass:"admin-tag-form",attrs:{span:16}},[t._l(t.list,function(e,n){return a("Row",{key:n,staticClass:"admin-tag-item",attrs:{align:"middle",type:"flex",justify:"space-between"}},[t.editIndex!==n?a("span",[t._v(t._s(e.name))]):t._e(),t.editIndex===n?a("Form",{ref:"editDynamic",refInFor:!0,staticClass:"admin-tag-form",attrs:{model:t.editDynamic,inline:""}},[a("Form-item",{attrs:{prop:"value",rules:{required:!0,message:"分类名称不能为空",trigger:"blur"}}},[a("Input",{attrs:{type:"text"},model:{value:t.editDynamic.value,callback:function(e){t.editDynamic.value=e},expression:"editDynamic.value"}})],1),a("Form-item",[a("Button",{attrs:{type:"primary"},on:{click:function(e){t.handleEditSubmit("editDynamic")}}},[t._v("确定")]),a("Button",{attrs:{type:"ghost"},on:{click:t.handleEditCancel}},[t._v("取消")])],1)],1):t._e(),a("span",[a("span",{staticClass:"admin-status-tag",on:{click:function(a){t.edit(e.id,n,e.name)}}},[t._v("编辑")]),a("span",{staticClass:"admin-status-tag",on:{click:function(a){t.change(e.id,n)}}},[t._v(t._s(1==e.status?"禁用":"启用"))])])],1)}),a("Form",{ref:"formDynamic",staticClass:"admin-tag-form",attrs:{model:t.formDynamic}},[t._l(t.formDynamic.items,function(e,n){return a("Form-item",{key:n,attrs:{prop:"items."+n+".value",rules:{required:!0,message:"分类名称不能为空",trigger:"blur"}}},[a("Row",[a("Col",{attrs:{span:"18"}},[a("Input",{attrs:{type:"text",placeholder:"请输入..."},model:{value:e.value,callback:function(t){e.value=t},expression:"item.value"}})],1),a("Col",{attrs:{span:"3",offset:"1"}},[a("Button",{attrs:{type:"ghost"},on:{click:function(e){t.handleRemove(n)}}},[t._v("删除")])],1),a("Col",{attrs:{span:"2"}},[a("Button",{attrs:{type:"primary"},on:{click:function(e){t.handleSubmit("formDynamic")}}},[t._v("提交")])],1)],1)],1)}),"common"==t.editStatus?a("Form-item",[a("Row",[a("Col",{attrs:{span:"12"}},[a("Button",{attrs:{type:"dashed",long:"",icon:"plus-round"},on:{click:t.handleAdd}},[t._v("新增")])],1)],1)],1):t._e()],2)],2)],1)},i=[],s={render:n,staticRenderFns:i};e.a=s},y8ae:function(t,e,a){"use strict";e.a={SUCCESS:0,ERROR:1,LOGIN_TIMEOUT:1001,IN_ACTIVE:1002}}});
//# sourceMappingURL=list.8258ab577b2b119a3c81.js.map